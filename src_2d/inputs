# SIMULATION LENGTH
length.max_step  = 1               # Maximum number of time-steps
length.stop_time = 0.7                # Maximum simulated time [s]

# MESH GENERATION (SOME PARAMETERS ARE NOT USED BUT NECESSARY FOR AMREX)
geometry.is_periodic =  0 0	      # Set to 0 because the system is not periodic (x,y)
geometry.coord_sys   =  0             # Set to 0 because cartesian coordinates are used
geometry.prob_lo     =  0.00  0.00    # Coordinates of the bottom-left corner of the domain (x,y)
geometry.prob_hi     =  0.02  0.025   # Coordinates of the top-right corner of the domain (x,y)
amr.n_cell           =  32   32       # Number of cells (x,y)
amr.max_level        = 2              # Maximum level (The smallest level is at 0)
amr.ref_ratio        = 2 2            # Grid refinement ratio between successive levels (0-->1, 1-->2, ...) 
amr.blocking_factor  = 8              # Minimum number of cells per grid in each direction
amr.max_grid_size    = 16 	      # Maximum number of cells per grid in each direction
amr.v                = 1              # Verbosity in amrex (1 = on, 0 = off)
grid.regrid_int      = 2              # How often to check if regridding is necessary (in time-step)
grid.max_grid_size_1d = 16	      # Maximum number of cells per grid in each direction (for shallow-water solver)
grid.surfdist = 0.001  0.0005  0.0001 # Distance from the free surface that triggers regridding (one value per level)

# HEAT SOLVER
heat.meltvel = 0.01                   # Prescribed melt velocity
heat.tempinit = 293.0                 # Initial temperature of the sample
heat.surf_pos = 0.020                 # Position of the free surface inside the domain (assumed horizontal and perpendicular to the y-direction)
heat.flux_peak = 300e6                # Magnitude of the peak of the gaussian heat flux pulse
heat.flux_pos = 0.01                  # Position of the peak of the gaussian heat flux pulse
heat.flux_width = 0.003		      # Width of the gaussian heat flux pulse
heat.exp_time = 0.4		      # Duration of the heat flux pulse (starts at time = 0.0)

# SHALLOW WATER SOLVER
sw.solve = 1                          # Flag to control if the melt motion is on (1 = on, 0 = off)

# MATERIAL
material.material = Tungsten          # Material
material.phiT_max_T = 8000            # Maximum temperature used to generate the enthalpy-temperature tables
material.phiT_n_points = 10000	      # Number of points used to generature the enthalpy-temperature tables

# OUTPUT
output.plot_file  = plt               # Name of the plot files to open in amrex
output.plot_int   = 40     	      # How often to produce a plot file (in time-steps)    
output.check_file = chk		      # Name of the restart files
output.check_int = 10		      # How often to produce a restart file (in time-steps)
output.verbose   = 1		      # Verbosity of the code (1 = on, 0 = off)

# NUMERICS
numerics.cfl       = 0.95	      # Safety factor used to multiply the minimum time-step which ensures stability of the heat solver
numerics.do_reflux = 1		      # Activate or deactivate reflux ( 1 = on, 0 = off)
numerics.dt_change_max = 1.1 	      # Maximum fractional change of the time step between two successive time-steps